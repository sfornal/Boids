<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Boids Algorithm Demo</title>
	<link rel="stylesheet" href="css/boids.css" />
	<link rel="stylesheet" href="css/prettify.css" />
</head>
<body class="dark-bg">
	
	<div class="outer-wrap dark-bg">

		<header class="inner-col">
			<h1>Flocking</h1>
			<h2>By Stephen Fornal</h2>
			<p>The <a href="http://en.wikipedia.org/wiki/Boids">boids algorithm</a>, developed by Craig Reynolds, et al. in 1986, is a simple algorithm for moving objects in space based on a set of rules. The interesting aspect of the algorithm is the emergent behaviors that appear when the rules are applied. It resembles the way birds flock when flying together.</p>
			<p>This demo was created as an exercise. I am attempting to learn a bit more about programming in Javascript, and using the <code>&lt;canvas&gt;</code> element in particular. I intend to employ an object-oriented design, which I have not previously attempted in Javascript. I will also try my hand at name-spacing in Javascript for the first time.</p>
		</header>
		
		</div><!-- end of .outer-wrap .dark-bg -->
		
		<div class="outer-wrap light-bg">
		
		<section id="demo" class="inner-col">
			<h2>Boids in Action</h2>
		
		<div id="canvas-wrap">
			<canvas id="boids"></canvas>
		</div><!-- end of #canvas-wrap -->

		</section>
		
	</div><!-- end of .outer-wrap .light-bg -->
	
	<div class="outer-wrap dark-bg">
	
		<section id="main" class="inner-col">
			<h2>About the Code</h2>
			<p>Since this is mainly an exercise in writing "object-oriented" style Javascript, I started by
				deciding what classes I would need. I settled on a <code>Vector2</code> class that would represent a vector
				in 2-dimensional space, a <code>Bird</code> class that would be composed of a <code>Vector2</code> for position and velocity, and a <code>World</code> class that would have a collection of <code>Bird</code> objects and run the animation.
			</p>
			
			<p>I am using a "name space" object called <code>Boids</code> to act as a container for all of my classes and such. Because I'm working quickly, I have the <code>Bird</code> and <code>World</code> objects tightly coupled. It is probably not the best design ever, but I am more interested in getting it to work than I am in a perfectly designed set of encapsulated objects. The only reason the <code>World</code> is a class at all is that, in theory, you could have multiple canvas elements, each with their own simulation. In reality, the performance will probably suck too much.</p>
			
			<h3>Vector2 Class</h3>
			<p>I implemented a simple 2-D vector class (I opted to ignore 3-D for now, since I don't intend to render in 3-D), with basic vector operation like addition, subtraction, dot product, and scale.</p>
<pre title="Vector2D Class" class="prettyprint linenums">
/** Boids is the name space function. Give a hoot, don't pollute! */
var Boids = Boids || {};

/**
	A simplistic 2-D Vector implementation, written
	for the practice.
	@param dx The x component of the vector, defaults to 0
	@param dy The y component of the vector, defaults to 0
*/
Boids.Vector2 = function(dx, dy)
{
	"use strict";
	this.x = dx || 0;
	this.y = dy || 0;
};

/**
	Return a string in the form "x: n y: n"
	@return The string representation of this vector
*/
Boids.Vector2.prototype.toString = function()
{
	"use strict";
	return "x: " + this.x + " y: " + this.y;
};

/**
	Returns a copy of this vector.
	@return A copy of this vector
*/
Boids.Vector2.prototype.copy = function()
{
	"use strict";
	return new Boids.Vector2(this.x, this.y);
};

/**
	Adds another vector to this vector.
	This method mutates the current vector.
	@param v The vector to add
	@return This vector for chaining
*/
Boids.Vector2.prototype.add = function(v)
{
	"use strict";
	this.x += v.x;
	this.y += v.y;
	return this;
};

/**
	Adds a vector to this vector, and returns the result
	as a new vector. addNew() does not mutate this vector.
	@param v The vector to add
	@return The result as a new vector
*/
Boids.Vector2.prototype.addNew = function(v)
{
	"use strict";
	return this.copy().add(v);
};

/**
	Subtracts another vector from this vector.
	This method mutates the current vector.
	@param v The vector to subtract
	@return This vector for chaining
*/
Boids.Vector2.prototype.sub = function(v)
{
	"use strict";
	this.x -= v.x;
	this.y -= v.y;
	return this;
};

/**
	Subtracts a vector from this vector, and returns the result
	as a new vector. subNew() does not mutate this vector.
	@param v The vector to subtract
	@return The result as a new vector
*/
Boids.Vector2.prototype.subNew = function(v)
{
	"use strict";
	return this.copy().sub(v);
};

/**
	Scales this vector by a scalar value. scale() mutates this vector.
	@param sc The scalar value
	@return This vector, for chaining
*/
Boids.Vector2.prototype.scale = function(sc)
{
	"use strict";
	this.x *= sc;
	this.y *= sc;
	return this;
};

/**
	Calculates the scalar product of two vectors.
	@param v The vector to "dot" with this vector
	@return The scalar product
*/
Boids.Vector2.prototype.dot = function(v)
{
	"use strict";
	return this.x * v.x + this.y * v.y;
};

/**
	Returns the magnitude of this vector
	@return The magnitude of this vector
*/
Boids.Vector2.prototype.mag = function()
{
	"use strict";
	return Math.sqrt(this.dot(this));
};

/**
	Normalize this vector, changing it to a unit vector.
	@return This vector, for chaining
*/
Boids.Vector2.prototype.norm = function()
{
	"use strict";
	return this.scale(1 / this.mag());
};

/**
	Get a normalized copy of this vector.
	@return A normalized copy of this vector
*/
Boids.Vector2.prototype.normNew = function()
{
	"use strict";
	return this.copy().norm();
};

/**
	Get the heading (in radians) of this vector.
	@return The heading of this vector
*/
Boids.Vector2.prototype.heading = function()
{
	"use strict";
	return Math.atan2(this.y, this.x);
};
</pre>			
		</section>
			
		<footer class="inner-col">
			<p>&copy;2012 Stephen Fornal &mdash; <a href="http://creativecommons.org/licenses/by-sa/3.0/us/">CC BY-SA 3.0</a></p>
		</footer>
	</div>
	
	<script src="script/boids.vector2.js"></script>
	<script src="script/boids.bird.js"></script>
	<script src="script/boids.world.js"></script>
	<script charset="utf-8">
		window.addEventListener('load', function()
		{
			var demo = new Boids.World('boids');
			demo.animate();
		}, true);
	</script>
	
</body>
</html>